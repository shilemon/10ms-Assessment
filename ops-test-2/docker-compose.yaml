version: "3.9"

services:
  app:
    build: ./app
    container_name: test2-app
    ports:
      - "8080:8080"
    volumes:
      - ./logs:/var/log/test2
    depends_on:
      - sidecar

  sidecar:
    image: busybox
    container_name: test2-sidecar
    command: ["sh", "-c", "tail -F /var/log/test2/*.log"]
    volumes:
      - ./logs:/var/log/test2
